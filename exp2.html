<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EXP Calculator</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

<h2>EXP Level Calculator</h2>

<form id="expForm">
    <label for="startLevel">Select Start Level (1-99):</label>
    <select id="startLevel" name="startLevel">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>
        <option value="32">32</option>
        <option value="33">33</option>
        <option value="34">34</option>
        <option value="35">35</option>
        <option value="36">36</option>
        <option value="37">37</option>
        <option value="38">38</option>
        <option value="39">39</option>
        <option value="40">40</option>
        <option value="41">41</option>
        <option value="42">42</option>
        <option value="43">43</option>
        <option value="44">44</option>
        <option value="45">45</option>
        <option value="46">46</option>
        <option value="47">47</option>
        <option value="48">48</option>
        <option value="49">49</option>
        <option value="50">50</option>
        <option value="51">51</option>
        <option value="52">52</option>
        <option value="53">53</option>
        <option value="54">54</option>
        <option value="55">55</option>
        <option value="56">56</option>
        <option value="57">57</option>
        <option value="58">58</option>
        <option value="59">59</option>
        <option value="60">60</option>
        <option value="61">61</option>
        <option value="62">62</option>
        <option value="63">63</option>
        <option value="64">64</option>
        <option value="65">65</option>
        <option value="66">66</option>
        <option value="67">67</option>
        <option value="68">68</option>
        <option value="69">69</option>
        <option value="70">70</option>
        <option value="71">71</option>
        <option value="72">72</option>
        <option value="73">73</option>
        <option value="74">74</option>
        <option value="75">75</option>
        <option value="76">76</option>
        <option value="77">77</option>
        <option value="78">78</option>
        <option value="79">79</option>
        <option value="80">80</option>
        <option value="81">81</option>
        <option value="82">82</option>
        <option value="83">83</option>
        <option value="84">84</option>
        <option value="85">85</option>
        <option value="86">86</option>
        <option value="87">87</option>
        <option value="88">88</option>
        <option value="89">89</option>
        <option value="90">90</option>
        <option value="91">91</option>
        <option value="92">92</option>
        <option value="93">93</option>
        <option value="94">94</option>
        <option value="95">95</option>
        <option value="96">96</option>
        <option value="97">97</option>
        <option value="98">98</option>
        <option value="99">99</option>
    </select><br><br>
    </select><br><br>

    <label for="endLevel">Select End Level (1-99):</label>
    <select id="endLevel" name="endLevel">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>
        <option value="32">32</option>
        <option value="33">33</option>
        <option value="34">34</option>
        <option value="35">35</option>
        <option value="36">36</option>
        <option value="37">37</option>
        <option value="38">38</option>
        <option value="39">39</option>
        <option value="40">40</option>
        <option value="41">41</option>
        <option value="42">42</option>
        <option value="43">43</option>
        <option value="44">44</option>
        <option value="45">45</option>
        <option value="46">46</option>
        <option value="47">47</option>
        <option value="48">48</option>
        <option value="49">49</option>
        <option value="50">50</option>
        <option value="51">51</option>
        <option value="52">52</option>
        <option value="53">53</option>
        <option value="54">54</option>
        <option value="55">55</option>
        <option value="56">56</option>
        <option value="57">57</option>
        <option value="58">58</option>
        <option value="59">59</option>
        <option value="60">60</option>
        <option value="61">61</option>
        <option value="62">62</option>
        <option value="63">63</option>
        <option value="64">64</option>
        <option value="65">65</option>
        <option value="66">66</option>
        <option value="67">67</option>
        <option value="68">68</option>
        <option value="69">69</option>
        <option value="70">70</option>
        <option value="71">71</option>
        <option value="72">72</option>
        <option value="73">73</option>
        <option value="74">74</option>
        <option value="75">75</option>
        <option value="76">76</option>
        <option value="77">77</option>
        <option value="78">78</option>
        <option value="79">79</option>
        <option value="80">80</option>
        <option value="81">81</option>
        <option value="82">82</option>
        <option value="83">83</option>
        <option value="84">84</option>
        <option value="85">85</option>
        <option value="86">86</option>
        <option value="87">87</option>
        <option value="88">88</option>
        <option value="89">89</option>
        <option value="90">90</option>
        <option value="91">91</option>
        <option value="92">92</option>
        <option value="93">93</option>
        <option value="94">94</option>
        <option value="95">95</option>
        <option value="96">96</option>
        <option value="97">97</option>
        <option value="98">98</option>
        <option value="99">99</option>
    </select><br><br>
    </select><br><br>

    <label for="expCurrent">Current EXP Percentage at Start Level (e.g., 40.0):</label>
    <input type="number" id="expCurrent" name="expCurrent" min="0" max="100" step="0.1" required><br><br>

    <label for="expEndPercentage">End EXP Percentage at End Level (e.g., 50.0):</label>
    <input type="number" id="expEndPercentage" name="expEndPercentage" min="0" max="100" step="0.1" required><br><br>

    <button type="submit">Calculate</button>
</form>

<div id="result"></div>

<script>
$(document).ready(function(){
    var expTable = {
        1: 0, 2: 17, 3: 31, 4: 48, 5: 68, 6: 145, 7: 209, 8: 286, 9: 374, 10: 473, 
        11: 680, 12: 818, 13: 1042, 14: 1243, 15: 1488, 16: 1765, 17: 2062, 18: 2380, 19: 2678, 20: 3018, 
        21: 3856, 22: 4427, 23: 4736, 24: 5331, 25: 5960, 26: 7021, 27: 8153, 28: 9364, 29: 10649, 30: 15432,
        31: 19827, 32: 22752, 33: 25854, 34: 29134, 35: 34638, 36: 39122, 37: 43842, 38: 48798, 39: 53997, 40: 75747,
        41: 93056, 42: 103538, 43: 114517, 44: 125998, 45: 144230, 46: 158899, 47: 174192, 48: 190106, 49: 206646, 50: 278714,
        51: 341152, 52: 380928, 53: 422640, 54: 466283, 55: 527424, 56: 581048, 57: 636896, 58: 695242, 59: 755810, 60: 916272,
        61: 1097742, 62: 1209672, 63: 1326348, 64: 1447770, 65: 1610844, 66: 1755573, 67: 1905834, 68: 2061633, 69: 2222964, 70: 2776200,
        71: 5084424, 72: 5499500, 73: 5930301, 74: 6376826, 75: 6839073, 76: 7693890, 77: 8232260, 78: 8788589, 79: 9362879, 80: 10323835,
        81: 13398927, 82: 14641798, 83: 15932367, 84: 17270635, 85: 18656602, 86: 20992870, 87: 22582560, 88: 24225885, 89: 25922856, 90: 25696788,
        91: 37981008, 92: 45434844, 93: 53209728, 94: 71523270, 95: 92963520, 96: 139066200, 97: 189879300, 98: 226726500, 99: 999999999
    };

    $('#expForm').on('submit', function(event){
        event.preventDefault();
        var startLevel = parseInt($('#startLevel').val());
        var endLevel = parseInt($('#endLevel').val());
        var currentExpPercentage = parseFloat($('#expCurrent').val());
        var endExpPercentage = parseFloat($('#expEndPercentage').val());

        if (endLevel <= startLevel) {
            $('#result').html("End level must be higher than start level.");
            return;
        }

        var resultHtml = "<h3>Results:</h3>";

        // คำนวณ EXP ปัจจุบันจาก % ของเลเวลเริ่มต้น
        var expRequiredForNextLevel = expTable[startLevel + 1];
        var currentExp = Math.round((currentExpPercentage / 100) * expRequiredForNextLevel);

        // คำนวณ EXP ที่เหลือในเลเวลเริ่มต้น
        var remainingExpToLevelUp = expRequiredForNextLevel - currentExp;

        // แสดงผลการคำนวณ
        resultHtml += "เลเวลเริ่มต้น " + startLevel + " (Exp " + currentExpPercentage + "%)<br>";
        resultHtml += "เลเวลสุดท้าย " + endLevel + " (Exp " + endExpPercentage + "%)<br><br>";

        // Preview ข้อมูล EXP ของแต่ละเลเวลที่ถูกคำนวณ
        resultHtml += "<h4>Preview EXP ที่ถูกคำนวณ:</h4>";
        resultHtml += "เลเวล " + startLevel + ": ใช้ Exp " + remainingExpToLevelUp.toLocaleString() + " เพื่ออัพเลเวล<br>";

        var totalExp = remainingExpToLevelUp;

        for (var level = startLevel + 1; level < endLevel; level++) {
            resultHtml += "เลเวล " + level + ": ใช้ Exp " + expTable[level + 1].toLocaleString() + "<br>";
            totalExp += expTable[level + 1];
        }

        // ถ้าเลเวลสุดท้ายคือ 99 ไม่ต้องคำนวณต่อ
        if (endLevel < 99 && endExpPercentage > 0) {
            var finalExpAtEndLevel = Math.round((endExpPercentage / 100) * expTable[endLevel + 1]);
            resultHtml += "เลเวล " + endLevel + ": ใช้ Exp " + finalExpAtEndLevel.toLocaleString() + " ไปถึง Exp เป้าหมาย<br>";
            totalExp += finalExpAtEndLevel;
        } else if (endLevel == 99) {
            resultHtml += "เลเวล 99: คุณได้ถึงเลเวลสูงสุดแล้ว ไม่มี Exp เพิ่มเติม<br>";
        }

        resultHtml += "<br><b>ต้องการ Exp ทั้งหมด: " + totalExp.toLocaleString() + "</b><br>";

        $('#result').html(resultHtml);
    });
});
</script>

</body>
</html>
